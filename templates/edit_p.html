{% extends "base.html" %}
{% block head %}
    <title>Edit</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://use.fontawesome.com/53ac9b564e.js"></script>
{% endblock %}
{% block content %}
<div class="container">
    <form action="/admin/edit/save/{{ ppl._id }}" method="post" enctype="multipart/form-data">
        Name:<br>
        <input type="text" name="name" value="{{ ppl.name }}"><br><br>
        Biography:<br>
        <textarea name="bio" rows="10" cols="30">{{ ppl.bio }}</textarea><br><br>
        Branch:<br>
        <select name="branch">
            {% for branch in branches %}
            {% if ppl.branch == branch %}
            <option value="{{ branch }}" selected>{{ branch }}</option>
            {% else %}
            <option value="{{ branch }}">{{ branch }}</option>
            {% endif %}
            {% endfor %}
        </select><br><br>
        Graduating Year:<br>
        <select name="year">
            {% for yr in yrs %}
            {% if ppl.year == yr %}
            <option value="{{ yr }}" selected>{{ yr }}</option>
            {% else %}
            <option value="{{ yr }}">{{ yr }}</option>
            {% endif %}
            {% endfor %}
        </select><br><br>
        {% if ppl.featured %}
        <input type="checkbox" id="featured" name="feat" checked>
        {% else %}
        <input type="checkbox" id="featured" name="feat">
        {% endif %}
        <label for="featured">Featured</label><br><br>
        Veteran Image:<br>
        <div style="margin: auto; padding: 5px; border: 2px solid #ccc; border-radius: 4px; width: 50%; ">
        <br />Veteran Image:
            <div style="padding: 45px 0 30px 0; color: #598cc0; font-size: 12px; font-style: italic; font-family: Arial, sans-serif;">
                <img src="" height="200" alt="[No image selected yet...]"><br /><br />
                <input type="file" name="file" accept="image/*" id="file" onchange="previewFile()">
            </div>

            <label for="file" class="custom-file-upload">
                <i class="fa fa-arrow-up" aria-hidden="true"></i> Select Image
            </label><br /><br />
        </div><br><br><br>
        <a class="formbtn" href="/admin/edit/">Cancel</a>
        <input type="submit" value="Submit" style="width: 150px;">
    </form>
</div>
<script>
    function previewFile() {
      var preview = document.querySelector('img');
      var file    = document.querySelector('input[type=file]').files[0];
      var reader  = new FileReader();

      reader.onloadend = function () {
        preview.src = reader.result;
      }

      if (file) {
        reader.readAsDataURL(file);
      } else {
        preview.src = "";
      }
    }
</script>

{% endblock %}