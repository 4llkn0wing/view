{% extends "base.html" %}
{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='sorttable.js') }}" type="text/javascript"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='jquery-3.2.1.min.js') }}"></script>
    <title>Veterans</title>{% endblock %}
{% block content %}
<h2>Veterans</h2>
<input type="text" id="search" placeholder="Search..." style="float: right; margin-top: 0;">
<table id="vlist" style="width: 100%; cursor: pointer;" class="sortable">
    <thead>
    <tr style="background-color: #ebebeb;">
        <th>Name</th>
        <th>Graduating Year</th>
        <th>Branch</th>
    </tr>
    </thead>
    <tbody>
    {% for vet in ppl %}
    <tr onclick="location.href='#openVet{{ vet.name }}Modal'"><!--onclick="location.href='/vets/{{ vet.id }}'">-->
        <td id="nameth">{{ vet.name }}</td>
        <td id="yearth">{{ vet.year }}</td>
        <td id="branchth">{{ vet.branch }}</td>
    </tr>
    <div id="openVet{{ vet.name }}Modal" class="vetDialog" style="width: 100%; height: 100%; margin: 0;">
        <div id="modalWrapper" style="min-height: 100%; min-width: calc(100% - 40px); margin: 0; overflow-y: hidden;">
            <a href="#closeVet" title="Close" class="close" style="margin-right: 0;">X</a>
            <br><br>
            <div class="left-div left-text" style="overflow-y: auto; text-align: center; background-color: #ffffff;"><br>
                {% if vet.img != "" %}
                <img src="/image/{{ vet.img }}" alt="{{ vet.name }}" style="min-width: 100%"/>
                {% else %}
                <img src="/image/no_image.jpg" alt="No Image" style="min-width: 100%;"/>
                {% endif %}
                <h3>{{ vet.name }}</h3>
                <p>Branch: {{ vet.branch }}</p>
                <p>Graduating Year: {{ vet.year }}</p>
            </div>
            <div class="right-div right-text" style="width: 100%; min-width: 50%; height: 80%; overflow-y: auto !important; background-color: #ffffff;">
                <p>{{ vet.bio }}</p>
            </div>
        </div>
    </div>
    {% endfor %}
    </tbody>
</table>
<script>
    var $rows = $('#vlist tbody tr');
    $('#search').keyup(function() {

        var val = '^(?=.*\\b' + $.trim($(this).val()).split(/\s+/).join('\\b)(?=.*\\b') + ').*$',
            reg = RegExp(val, 'i'),
            text;

        $rows.show().filter(function() {
            text = $(this).text().replace(/\s+/g, ' ');
            return !reg.test(text);
        }).hide();
    });
    var checkScrollBars = function(){
        var b = $('body');
        var normalw = 0;
        var scrollw = 0;
        if(b.prop('scrollHeight')>b.height()){
            normalw = window.innerWidth;
            scrollw = normalw - b.width();
            $('.vetDialog').css({marginRight:'-'+scrollw+'px'});
        }
    }
</script>
{% endblock %}
